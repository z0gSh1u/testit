<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>测试需求报告</title>
        <script type="text/javascript" src="../lib/marked.min.js"></script>
        <script type="text/javascript" src="../js/1-requirement/writer.js"></script>
        <script>
            window.onload = function(){
                var reportDiv = document.getElementById('reportDiv')
                reportDiv.innerHTML = JSON2HTML(JSON.parse(sessionStorage.getItem('requirementJSON')))
                Array.from(reportDiv.getElementsByTagName("table")).forEach(e => {
                    e.border = 1
                });
                var tables = reportDiv.getElementsByTagName("table")
                var table = tables[tables.length-2]
                var rows = table.rows
                var flag = null
                Array.from(rows).forEach(r => {
                    if(flag == null){
                        flag = r.cells[0]
                        flag.rowspan = 1
                    }else if(r.cells[0].innerHTML == flag.innerHTML){
                        r.removeChild(r.cells[0])
                        flag.rowSpan = flag.rowSpan+1
                    }else{
                        flag = r.cells[0]
                        flag.rowspan = 1
                    }
                })
            }
        </script>
    </head>
    <body>
        <div id="reportDiv">

        </div>
    </body>
</html>